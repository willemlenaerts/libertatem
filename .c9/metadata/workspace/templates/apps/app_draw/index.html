{"filter":false,"title":"index.html","tooltip":"/templates/apps/app_draw/index.html","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":8,"column":60},"end":{"row":8,"column":61},"action":"insert","lines":["d"],"id":26}],[{"start":{"row":8,"column":61},"end":{"row":8,"column":62},"action":"insert","lines":["r"],"id":27}],[{"start":{"row":8,"column":62},"end":{"row":8,"column":63},"action":"insert","lines":["a"],"id":28}],[{"start":{"row":8,"column":63},"end":{"row":8,"column":64},"action":"insert","lines":["w"],"id":29}],[{"start":{"row":8,"column":64},"end":{"row":8,"column":65},"action":"insert","lines":["/"],"id":30}],[{"start":{"row":8,"column":65},"end":{"row":8,"column":66},"action":"insert","lines":["j"],"id":31}],[{"start":{"row":8,"column":66},"end":{"row":8,"column":67},"action":"insert","lines":["s"],"id":32}],[{"start":{"row":8,"column":67},"end":{"row":8,"column":68},"action":"insert","lines":["/"],"id":33}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":34}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["{"],"id":35}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["}"],"id":36}],[{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["%"],"id":37}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["%"],"id":38}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":[" "],"id":39}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["l"],"id":40}],[{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["o"],"id":41}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["a"],"id":42}],[{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["d"],"id":43}],[{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":[" "],"id":44}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["s"],"id":45}],[{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["t"],"id":46}],[{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["a"],"id":47}],[{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"insert","lines":["t"],"id":48}],[{"start":{"row":0,"column":12},"end":{"row":0,"column":13},"action":"insert","lines":["i"],"id":49}],[{"start":{"row":0,"column":8},"end":{"row":0,"column":13},"action":"remove","lines":["stati"],"id":50},{"start":{"row":0,"column":8},"end":{"row":0,"column":19},"action":"insert","lines":["staticfiles"]}],[{"start":{"row":0,"column":19},"end":{"row":0,"column":20},"action":"insert","lines":[" "],"id":51}],[{"start":{"row":8,"column":52},"end":{"row":8,"column":63},"action":"remove","lines":["excanvas.js"],"id":52},{"start":{"row":8,"column":52},"end":{"row":8,"column":111},"action":"insert","lines":["{% static 'apps/app_draw/js/html5-canvas-drawing-app.js' %}"]}],[{"start":{"row":8,"column":80},"end":{"row":8,"column":104},"action":"remove","lines":["html5-canvas-drawing-app"],"id":53},{"start":{"row":8,"column":80},"end":{"row":8,"column":81},"action":"insert","lines":["e"]}],[{"start":{"row":8,"column":81},"end":{"row":8,"column":82},"action":"insert","lines":["x"],"id":54}],[{"start":{"row":8,"column":82},"end":{"row":8,"column":83},"action":"insert","lines":["c"],"id":55}],[{"start":{"row":8,"column":83},"end":{"row":8,"column":84},"action":"insert","lines":["a"],"id":56}],[{"start":{"row":8,"column":84},"end":{"row":8,"column":85},"action":"insert","lines":["n"],"id":57}],[{"start":{"row":8,"column":85},"end":{"row":8,"column":86},"action":"insert","lines":["v"],"id":58}],[{"start":{"row":8,"column":86},"end":{"row":8,"column":87},"action":"insert","lines":["a"],"id":59}],[{"start":{"row":8,"column":87},"end":{"row":8,"column":88},"action":"insert","lines":["s"],"id":60}],[{"start":{"row":8,"column":118},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":61},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":9,"column":4},"end":{"row":11,"column":17},"action":"insert","lines":["{% compress js %}","    <script src=\"/my_script.js\" type=\"text/javascript\"></script>","{% endcompress %}"],"id":62}],[{"start":{"row":12,"column":4},"end":{"row":12,"column":110},"action":"remove","lines":["<script type=\"text/javascript\" src=\"{% static 'apps/app_draw/js/html5-canvas-drawing-app.js' %}\"></script>"],"id":63}],[{"start":{"row":10,"column":4},"end":{"row":10,"column":64},"action":"remove","lines":["<script src=\"/my_script.js\" type=\"text/javascript\"></script>"],"id":64},{"start":{"row":10,"column":4},"end":{"row":10,"column":110},"action":"insert","lines":["<script type=\"text/javascript\" src=\"{% static 'apps/app_draw/js/html5-canvas-drawing-app.js' %}\"></script>"]}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":17},"action":"remove","lines":["{% endcompress %}"],"id":65}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":21},"action":"remove","lines":["    {% compress js %}"],"id":66}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":100},"action":"remove","lines":[" type=\"text/javascript\" src=\"{% static 'apps/app_draw/js/html5-canvas-drawing-app.js' %}\""],"id":67}],[{"start":{"row":10,"column":12},"end":{"row":12,"column":4},"action":"insert","lines":["","      ","    "],"id":68}],[{"start":{"row":11,"column":6},"end":{"row":449,"column":5},"action":"insert","lines":["// Copyright 2010 William Malone (www.williammalone.com)","//","// Licensed under the Apache License, Version 2.0 (the \"License\");","// you may not use this file except in compliance with the License.","// You may obtain a copy of the License at","//","//   http://www.apache.org/licenses/LICENSE-2.0","//","// Unless required by applicable law or agreed to in writing, software","// distributed under the License is distributed on an \"AS IS\" BASIS,","// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","// See the License for the specific language governing permissions and","// limitations under the License.","","/*jslint browser: true */","/*global G_vmlCanvasManager */","","var drawingApp = (function () {","","\t\"use strict\";","","\tvar canvas,","\t\tcontext,","\t\tcanvasWidth = 490,","\t\tcanvasHeight = 220,","\t\tcolorPurple = \"#cb3594\",","\t\tcolorGreen = \"#659b41\",","\t\tcolorYellow = \"#ffcf33\",","\t\tcolorBrown = \"#986928\",","\t\toutlineImage = new Image(),","\t\tcrayonImage = new Image(),","\t\tmarkerImage = new Image(),","\t\teraserImage = new Image(),","\t\tcrayonBackgroundImage = new Image(),","\t\tmarkerBackgroundImage = new Image(),","\t\teraserBackgroundImage = new Image(),","\t\tcrayonTextureImage = new Image(),","\t\tclickX = [],","\t\tclickY = [],","\t\tclickColor = [],","\t\tclickTool = [],","\t\tclickSize = [],","\t\tclickDrag = [],","\t\tpaint = false,","\t\tcurColor = colorPurple,","\t\tcurTool = \"crayon\",","\t\tcurSize = \"normal\",","\t\tmediumStartX = 18,","\t\tmediumStartY = 19,","\t\tmediumImageWidth = 93,","\t\tmediumImageHeight = 46,","\t\tdrawingAreaX = 111,","\t\tdrawingAreaY = 11,","\t\tdrawingAreaWidth = 267,","\t\tdrawingAreaHeight = 200,","\t\ttoolHotspotStartY = 23,","\t\ttoolHotspotHeight = 38,","\t\tsizeHotspotStartY = 157,","\t\tsizeHotspotHeight = 36,","\t\ttotalLoadResources = 8,","\t\tcurLoadResNum = 0,","\t\tsizeHotspotWidthObject = {","\t\t\thuge: 39,","\t\t\tlarge: 25,","\t\t\tnormal: 18,","\t\t\tsmall: 16","\t\t},","","\t\t// Clears the canvas.","\t\tclearCanvas = function () {","","\t\t\tcontext.clearRect(0, 0, canvasWidth, canvasHeight);","\t\t},","","\t\t// Redraws the canvas.","\t\tredraw = function () {","","\t\t\tvar locX,","\t\t\t\tlocY,","\t\t\t\tradius,","\t\t\t\ti,","\t\t\t\tselected,","","\t\t\t\tdrawCrayon = function (x, y, color, selected) {","","\t\t\t\t\tcontext.beginPath();","\t\t\t\t\tcontext.moveTo(x + 41, y + 11);","\t\t\t\t\tcontext.lineTo(x + 41, y + 35);","\t\t\t\t\tcontext.lineTo(x + 29, y + 35);","\t\t\t\t\tcontext.lineTo(x + 29, y + 33);","\t\t\t\t\tcontext.lineTo(x + 11, y + 27);","\t\t\t\t\tcontext.lineTo(x + 11, y + 19);","\t\t\t\t\tcontext.lineTo(x + 29, y + 13);","\t\t\t\t\tcontext.lineTo(x + 29, y + 11);","\t\t\t\t\tcontext.lineTo(x + 41, y + 11);","\t\t\t\t\tcontext.closePath();","\t\t\t\t\tcontext.fillStyle = color;","\t\t\t\t\tcontext.fill();","","\t\t\t\t\tif (selected) {","\t\t\t\t\t\tcontext.drawImage(crayonImage, x, y, mediumImageWidth, mediumImageHeight);","\t\t\t\t\t} else {","\t\t\t\t\t\tcontext.drawImage(crayonImage, 0, 0, 59, mediumImageHeight, x, y, 59, mediumImageHeight);","\t\t\t\t\t}","\t\t\t\t},","","\t\t\t\tdrawMarker = function (x, y, color, selected) {","","\t\t\t\t\tcontext.beginPath();","\t\t\t\t\tcontext.moveTo(x + 10, y + 24);","\t\t\t\t\tcontext.lineTo(x + 10, y + 24);","\t\t\t\t\tcontext.lineTo(x + 22, y + 16);","\t\t\t\t\tcontext.lineTo(x + 22, y + 31);","\t\t\t\t\tcontext.closePath();","\t\t\t\t\tcontext.fillStyle = color;","\t\t\t\t\tcontext.fill();","","\t\t\t\t\tif (selected) {","\t\t\t\t\t\tcontext.drawImage(markerImage, x, y, mediumImageWidth, mediumImageHeight);","\t\t\t\t\t} else {","\t\t\t\t\t\tcontext.drawImage(markerImage, 0, 0, 59, mediumImageHeight, x, y, 59, mediumImageHeight);","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t// Make sure required resources are loaded before redrawing","\t\t\tif (curLoadResNum < totalLoadResources) {","\t\t\t\treturn;","\t\t\t}","","\t\t\tclearCanvas();","","\t\t\tif (curTool === \"crayon\") {","","\t\t\t\t// Draw the crayon tool background","\t\t\t\tcontext.drawImage(crayonBackgroundImage, 0, 0, canvasWidth, canvasHeight);","","\t\t\t\t// Draw purple crayon","\t\t\t\tselected = (curColor === colorPurple);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY = 19;","\t\t\t\tdrawCrayon(locX, locY, colorPurple, selected);","","\t\t\t\t// Draw green crayon","\t\t\t\tselected = (curColor === colorGreen);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawCrayon(locX, locY, colorGreen, selected);","","\t\t\t\t// Draw yellow crayon","\t\t\t\tselected = (curColor === colorYellow);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawCrayon(locX, locY, colorYellow, selected);","","\t\t\t\t// Draw brown crayon","\t\t\t\tselected = (curColor === colorBrown);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawCrayon(locX, locY, colorBrown, selected);","","\t\t\t} else if (curTool === \"marker\") {","","\t\t\t\t// Draw the marker tool background","\t\t\t\tcontext.drawImage(markerBackgroundImage, 0, 0, canvasWidth, canvasHeight);","","\t\t\t\t// Draw purple marker","\t\t\t\tselected = (curColor === colorPurple);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY = 19;","\t\t\t\tdrawMarker(locX, locY, colorPurple, selected);","","\t\t\t\t// Draw green marker","\t\t\t\tselected = (curColor === colorGreen);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawMarker(locX, locY, colorGreen, selected);","","\t\t\t\t// Draw yellow marker","\t\t\t\tselected = (curColor === colorYellow);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawMarker(locX, locY, colorYellow, selected);","","\t\t\t\t// Draw brown marker","\t\t\t\tselected = (curColor === colorBrown);","\t\t\t\tlocX = selected ? 18 : 52;","\t\t\t\tlocY += 46;","\t\t\t\tdrawMarker(locX, locY, colorBrown, selected);","","\t\t\t} else if (curTool === \"eraser\") {","","\t\t\t\tcontext.drawImage(eraserBackgroundImage, 0, 0, canvasWidth, canvasHeight);","\t\t\t\tcontext.drawImage(eraserImage, 18, 19, mediumImageWidth, mediumImageHeight);","\t\t\t}","","\t\t\t// Draw line on ruler to indicate size","\t\t\tswitch (curSize) {","\t\t\tcase \"small\":","\t\t\t\tlocX = 467;","\t\t\t\tbreak;","\t\t\tcase \"normal\":","\t\t\t\tlocX = 450;","\t\t\t\tbreak;","\t\t\tcase \"large\":","\t\t\t\tlocX = 428;","\t\t\t\tbreak;","\t\t\tcase \"huge\":","\t\t\t\tlocX = 399;","\t\t\t\tbreak;","\t\t\tdefault:","\t\t\t\tbreak;","\t\t\t}","\t\t\tlocY = 189;","\t\t\tcontext.beginPath();","\t\t\tcontext.rect(locX, locY, 2, 12);","\t\t\tcontext.closePath();","\t\t\tcontext.fillStyle = '#333333';","\t\t\tcontext.fill();","","\t\t\t// Keep the drawing in the drawing area","\t\t\tcontext.save();","\t\t\tcontext.beginPath();","\t\t\tcontext.rect(drawingAreaX, drawingAreaY, drawingAreaWidth, drawingAreaHeight);","\t\t\tcontext.clip();","","\t\t\t// For each point drawn","\t\t\tfor (i = 0; i < clickX.length; i += 1) {","","\t\t\t\t// Set the drawing radius","\t\t\t\tswitch (clickSize[i]) {","\t\t\t\tcase \"small\":","\t\t\t\t\tradius = 2;","\t\t\t\t\tbreak;","\t\t\t\tcase \"normal\":","\t\t\t\t\tradius = 5;","\t\t\t\t\tbreak;","\t\t\t\tcase \"large\":","\t\t\t\t\tradius = 10;","\t\t\t\t\tbreak;","\t\t\t\tcase \"huge\":","\t\t\t\t\tradius = 20;","\t\t\t\t\tbreak;","\t\t\t\tdefault:","\t\t\t\t\tbreak;","\t\t\t\t}","","\t\t\t\t// Set the drawing path","\t\t\t\tcontext.beginPath();","\t\t\t\t// If dragging then draw a line between the two points","\t\t\t\tif (clickDrag[i] && i) {","\t\t\t\t\tcontext.moveTo(clickX[i - 1], clickY[i - 1]);","\t\t\t\t} else {","\t\t\t\t\t// The x position is moved over one pixel so a circle even if not dragging","\t\t\t\t\tcontext.moveTo(clickX[i] - 1, clickY[i]);","\t\t\t\t}","\t\t\t\tcontext.lineTo(clickX[i], clickY[i]);","\t\t\t\t","\t\t\t\t// Set the drawing color","\t\t\t\tif (clickTool[i] === \"eraser\") {","\t\t\t\t\t//context.globalCompositeOperation = \"destination-out\"; // To erase instead of draw over with white","\t\t\t\t\tcontext.strokeStyle = 'white';","\t\t\t\t} else {","\t\t\t\t\t//context.globalCompositeOperation = \"source-over\";\t// To erase instead of draw over with white","\t\t\t\t\tcontext.strokeStyle = clickColor[i];","\t\t\t\t}","\t\t\t\tcontext.lineCap = \"round\";","\t\t\t\tcontext.lineJoin = \"round\";","\t\t\t\tcontext.lineWidth = radius;","\t\t\t\tcontext.stroke();","\t\t\t}","\t\t\tcontext.closePath();","\t\t\t//context.globalCompositeOperation = \"source-over\";// To erase instead of draw over with white","\t\t\tcontext.restore();","","\t\t\t// Overlay a crayon texture (if the current tool is crayon)","\t\t\tif (curTool === \"crayon\") {","\t\t\t\tcontext.globalAlpha = 0.4; // No IE support","\t\t\t\tcontext.drawImage(crayonTextureImage, 0, 0, canvasWidth, canvasHeight);","\t\t\t}","\t\t\tcontext.globalAlpha = 1; // No IE support","","\t\t\t// Draw the outline image","\t\t\tcontext.drawImage(outlineImage, drawingAreaX, drawingAreaY, drawingAreaWidth, drawingAreaHeight);","\t\t},","","\t\t// Adds a point to the drawing array.","\t\t// @param x","\t\t// @param y","\t\t// @param dragging","\t\taddClick = function (x, y, dragging) {","","\t\t\tclickX.push(x);","\t\t\tclickY.push(y);","\t\t\tclickTool.push(curTool);","\t\t\tclickColor.push(curColor);","\t\t\tclickSize.push(curSize);","\t\t\tclickDrag.push(dragging);","\t\t},","","\t\t// Add mouse and touch event listeners to the canvas","\t\tcreateUserEvents = function () {","","\t\t\tvar press = function (e) {","\t\t\t\t// Mouse down location","\t\t\t\tvar sizeHotspotStartX,","\t\t\t\t\tmouseX = e.pageX - this.offsetLeft,","\t\t\t\t\tmouseY = e.pageY - this.offsetTop;","","\t\t\t\tif (mouseX < drawingAreaX) { // Left of the drawing area","\t\t\t\t\tif (mouseX > mediumStartX) {","\t\t\t\t\t\tif (mouseY > mediumStartY && mouseY < mediumStartY + mediumImageHeight) {","\t\t\t\t\t\t\tcurColor = colorPurple;","\t\t\t\t\t\t} else if (mouseY > mediumStartY + mediumImageHeight && mouseY < mediumStartY + mediumImageHeight * 2) {","\t\t\t\t\t\t\tcurColor = colorGreen;","\t\t\t\t\t\t} else if (mouseY > mediumStartY + mediumImageHeight * 2 && mouseY < mediumStartY + mediumImageHeight * 3) {","\t\t\t\t\t\t\tcurColor = colorYellow;","\t\t\t\t\t\t} else if (mouseY > mediumStartY + mediumImageHeight * 3 && mouseY < mediumStartY + mediumImageHeight * 4) {","\t\t\t\t\t\t\tcurColor = colorBrown;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t} else if (mouseX > drawingAreaX + drawingAreaWidth) { // Right of the drawing area","","\t\t\t\t\tif (mouseY > toolHotspotStartY) {","\t\t\t\t\t\tif (mouseY > sizeHotspotStartY) {","\t\t\t\t\t\t\tsizeHotspotStartX = drawingAreaX + drawingAreaWidth;","\t\t\t\t\t\t\tif (mouseY < sizeHotspotStartY + sizeHotspotHeight && mouseX > sizeHotspotStartX) {","\t\t\t\t\t\t\t\tif (mouseX < sizeHotspotStartX + sizeHotspotWidthObject.huge) {","\t\t\t\t\t\t\t\t\tcurSize = \"huge\";","\t\t\t\t\t\t\t\t} else if (mouseX < sizeHotspotStartX + sizeHotspotWidthObject.large + sizeHotspotWidthObject.huge) {","\t\t\t\t\t\t\t\t\tcurSize = \"large\";","\t\t\t\t\t\t\t\t} else if (mouseX < sizeHotspotStartX + sizeHotspotWidthObject.normal + sizeHotspotWidthObject.large + sizeHotspotWidthObject.huge) {","\t\t\t\t\t\t\t\t\tcurSize = \"normal\";","\t\t\t\t\t\t\t\t} else if (mouseX < sizeHotspotStartX + sizeHotspotWidthObject.small + sizeHotspotWidthObject.normal + sizeHotspotWidthObject.large + sizeHotspotWidthObject.huge) {","\t\t\t\t\t\t\t\t\tcurSize = \"small\";","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\tif (mouseY < toolHotspotStartY + toolHotspotHeight) {","\t\t\t\t\t\t\t\tcurTool = \"crayon\";","\t\t\t\t\t\t\t} else if (mouseY < toolHotspotStartY + toolHotspotHeight * 2) {","\t\t\t\t\t\t\t\tcurTool = \"marker\";","\t\t\t\t\t\t\t} else if (mouseY < toolHotspotStartY + toolHotspotHeight * 3) {","\t\t\t\t\t\t\t\tcurTool = \"eraser\";","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\tpaint = true;","\t\t\t\taddClick(mouseX, mouseY, false);","\t\t\t\tredraw();","\t\t\t},","","\t\t\t\tdrag = function (e) {","\t\t\t\t\tif (paint) {","\t\t\t\t\t\taddClick(e.pageX - this.offsetLeft, e.pageY - this.offsetTop, true);","\t\t\t\t\t\tredraw();","\t\t\t\t\t}","\t\t\t\t\t// Prevent the whole page from dragging if on mobile","\t\t\t\t\te.preventDefault();","\t\t\t\t},","","\t\t\t\trelease = function () {","\t\t\t\t\tpaint = false;","\t\t\t\t\tredraw();","\t\t\t\t},","","\t\t\t\tcancel = function () {","\t\t\t\t\tpaint = false;","\t\t\t\t};","","\t\t\t// Add mouse event listeners to canvas element","\t\t\tcanvas.addEventListener(\"mousedown\", press, false);","\t\t\tcanvas.addEventListener(\"mousemove\", drag, false);","\t\t\tcanvas.addEventListener(\"mouseup\", release);","\t\t\tcanvas.addEventListener(\"mouseout\", cancel, false);","","\t\t\t// Add touch event listeners to canvas element","\t\t\tcanvas.addEventListener(\"touchstart\", press, false);","\t\t\tcanvas.addEventListener(\"touchmove\", drag, false);","\t\t\tcanvas.addEventListener(\"touchend\", release, false);","\t\t\tcanvas.addEventListener(\"touchcancel\", cancel, false);","\t\t},","","\t\t// Calls the redraw function after all neccessary resources are loaded.","\t\tresourceLoaded = function () {","","\t\t\tcurLoadResNum += 1;","\t\t\tif (curLoadResNum === totalLoadResources) {","\t\t\t\tredraw();","\t\t\t\tcreateUserEvents();","\t\t\t}","\t\t},","","\t\t// Creates a canvas element, loads images, adds events, and draws the canvas for the first time.","\t\tinit = function () {","","\t\t\t// Create the canvas (Neccessary for IE because it doesn't know what a canvas element is)","\t\t\tcanvas = document.createElement('canvas');","\t\t\tcanvas.setAttribute('width', canvasWidth);","\t\t\tcanvas.setAttribute('height', canvasHeight);","\t\t\tcanvas.setAttribute('id', 'canvas');","\t\t\tdocument.getElementById('canvasDiv').appendChild(canvas);","\t\t\tif (typeof G_vmlCanvasManager !== \"undefined\") {","\t\t\t\tcanvas = G_vmlCanvasManager.initElement(canvas);","\t\t\t}","\t\t\tcontext = canvas.getContext(\"2d\"); // Grab the 2d canvas context","\t\t\t// Note: The above code is a workaround for IE 8 and lower. Otherwise we could have used:","\t\t\t//     context = document.getElementById('canvas').getContext(\"2d\");","","\t\t\t// Load images","\t\t\tcrayonImage.onload = resourceLoaded;","\t\t\tcrayonImage.src = \"{% static 'apps/app_draw/images/crayon-outline.png' %}\";","","\t\t\tmarkerImage.onload = resourceLoaded;","\t\t\tmarkerImage.src = \"images/marker-outline.png\";","","\t\t\teraserImage.onload = resourceLoaded;","\t\t\teraserImage.src = \"images/eraser-outline.png\";","","\t\t\tcrayonBackgroundImage.onload = resourceLoaded;","\t\t\tcrayonBackgroundImage.src = \"images/crayon-background.png\";","","\t\t\tmarkerBackgroundImage.onload = resourceLoaded;","\t\t\tmarkerBackgroundImage.src = \"images/marker-background.png\";","","\t\t\teraserBackgroundImage.onload = resourceLoaded;","\t\t\teraserBackgroundImage.src = \"images/eraser-background.png\";","","\t\t\tcrayonTextureImage.onload = resourceLoaded;","\t\t\tcrayonTextureImage.src = \"images/crayon-texture.png\";","","\t\t\toutlineImage.onload = resourceLoaded;","\t\t\toutlineImage.src = \"images/watermelon-duck-outline.png\";","\t\t};","","\treturn {","\t\tinit: init","\t};","}());"],"id":69}],[{"start":{"row":425,"column":21},"end":{"row":425,"column":22},"action":"remove","lines":["\""],"id":70},{"start":{"row":425,"column":21},"end":{"row":425,"column":33},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":428,"column":21},"end":{"row":428,"column":23},"action":"remove","lines":["\"i"],"id":71},{"start":{"row":428,"column":21},"end":{"row":428,"column":33},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":428,"column":33},"end":{"row":428,"column":34},"action":"insert","lines":["i"],"id":72}],[{"start":{"row":431,"column":31},"end":{"row":431,"column":32},"action":"remove","lines":["\""],"id":73},{"start":{"row":431,"column":31},"end":{"row":431,"column":43},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":434,"column":31},"end":{"row":434,"column":32},"action":"remove","lines":["\""],"id":74},{"start":{"row":434,"column":31},"end":{"row":434,"column":43},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":437,"column":31},"end":{"row":437,"column":32},"action":"remove","lines":["\""],"id":75},{"start":{"row":437,"column":31},"end":{"row":437,"column":43},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":440,"column":28},"end":{"row":440,"column":29},"action":"remove","lines":["\""],"id":76},{"start":{"row":440,"column":28},"end":{"row":440,"column":40},"action":"insert","lines":["\"{% static '"]}],[{"start":{"row":443,"column":22},"end":{"row":443,"column":23},"action":"remove","lines":["\""],"id":77}],[{"start":{"row":443,"column":22},"end":{"row":443,"column":34},"action":"insert","lines":["\"{% static '"],"id":78}],[{"start":{"row":425,"column":58},"end":{"row":425,"column":60},"action":"remove","lines":["\";"],"id":79},{"start":{"row":425,"column":58},"end":{"row":425,"column":64},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":428,"column":58},"end":{"row":428,"column":60},"action":"remove","lines":["\";"],"id":80},{"start":{"row":428,"column":58},"end":{"row":428,"column":64},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":431,"column":71},"end":{"row":431,"column":73},"action":"remove","lines":["\";"],"id":81},{"start":{"row":431,"column":71},"end":{"row":431,"column":77},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":434,"column":71},"end":{"row":434,"column":73},"action":"remove","lines":["\";"],"id":82},{"start":{"row":434,"column":71},"end":{"row":434,"column":77},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":437,"column":71},"end":{"row":437,"column":73},"action":"remove","lines":["\";"],"id":83},{"start":{"row":437,"column":71},"end":{"row":437,"column":77},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":440,"column":65},"end":{"row":440,"column":67},"action":"remove","lines":["\";"],"id":84},{"start":{"row":440,"column":65},"end":{"row":440,"column":71},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":443,"column":68},"end":{"row":443,"column":70},"action":"remove","lines":["\";"],"id":85},{"start":{"row":443,"column":68},"end":{"row":443,"column":74},"action":"insert","lines":["' %}\";"]}],[{"start":{"row":425,"column":33},"end":{"row":425,"column":47},"action":"insert","lines":["apps/app_draw/"],"id":86}],[{"start":{"row":428,"column":33},"end":{"row":428,"column":47},"action":"insert","lines":["apps/app_draw/"],"id":87}],[{"start":{"row":431,"column":43},"end":{"row":431,"column":57},"action":"insert","lines":["apps/app_draw/"],"id":88}],[{"start":{"row":434,"column":43},"end":{"row":434,"column":57},"action":"insert","lines":["apps/app_draw/"],"id":89}],[{"start":{"row":437,"column":43},"end":{"row":437,"column":57},"action":"insert","lines":["apps/app_draw/"],"id":90}],[{"start":{"row":440,"column":40},"end":{"row":440,"column":54},"action":"insert","lines":["apps/app_draw/"],"id":91}],[{"start":{"row":443,"column":34},"end":{"row":443,"column":48},"action":"insert","lines":["apps/app_draw/"],"id":92}],[{"start":{"row":455,"column":10},"end":{"row":456,"column":0},"action":"insert","lines":["",""],"id":93},{"start":{"row":456,"column":0},"end":{"row":456,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":4,"column":11},"end":{"row":4,"column":61},"action":"remove","lines":["Create HTML5 Canvas JavaScript Drawing App Example"],"id":94},{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":["E"]}],[{"start":{"row":4,"column":12},"end":{"row":4,"column":13},"action":"insert","lines":["x"],"id":95}],[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["e"],"id":96}],[{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["r"],"id":97}],[{"start":{"row":4,"column":15},"end":{"row":4,"column":16},"action":"insert","lines":["g"],"id":98}],[{"start":{"row":4,"column":16},"end":{"row":4,"column":17},"action":"insert","lines":["o"],"id":99}],[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":[" "],"id":100}],[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"remove","lines":[" "],"id":101}],[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":["s"],"id":102}],[{"start":{"row":4,"column":18},"end":{"row":4,"column":19},"action":"insert","lines":[" "],"id":103}],[{"start":{"row":4,"column":19},"end":{"row":4,"column":20},"action":"insert","lines":["D"],"id":104}],[{"start":{"row":4,"column":20},"end":{"row":4,"column":21},"action":"insert","lines":["r"],"id":105}],[{"start":{"row":4,"column":21},"end":{"row":4,"column":22},"action":"insert","lines":["a"],"id":106}],[{"start":{"row":4,"column":22},"end":{"row":4,"column":23},"action":"insert","lines":["w"],"id":107}],[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"insert","lines":["i"],"id":108}],[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"insert","lines":["n"],"id":109}],[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"insert","lines":["g"],"id":110}],[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"insert","lines":[" "],"id":111}],[{"start":{"row":4,"column":27},"end":{"row":4,"column":28},"action":"insert","lines":["A"],"id":112}],[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["P"],"id":113}],[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["p"],"id":114}],[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"remove","lines":["p"],"id":115}],[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"remove","lines":["P"],"id":116}],[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["p"],"id":117}],[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["p"],"id":118}],[{"start":{"row":4,"column":27},"end":{"row":4,"column":30},"action":"remove","lines":["App"],"id":119},{"start":{"row":4,"column":27},"end":{"row":4,"column":34},"action":"insert","lines":["Applied"]}],[{"start":{"row":4,"column":33},"end":{"row":4,"column":34},"action":"remove","lines":["d"],"id":120}],[{"start":{"row":4,"column":32},"end":{"row":4,"column":33},"action":"remove","lines":["e"],"id":121}],[{"start":{"row":4,"column":31},"end":{"row":4,"column":32},"action":"remove","lines":["i"],"id":122}],[{"start":{"row":4,"column":30},"end":{"row":4,"column":31},"action":"remove","lines":["l"],"id":123}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":2},"action":"insert","lines":["  "],"id":124},{"start":{"row":13,"column":0},"end":{"row":13,"column":2},"action":"insert","lines":["  "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":2},"action":"insert","lines":["  "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":2},"action":"insert","lines":["  "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":2},"action":"insert","lines":["  "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"insert","lines":["  "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":2},"action":"insert","lines":["  "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"insert","lines":["  "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":2},"action":"insert","lines":["  "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":2},"action":"insert","lines":["  "],"id":125},{"start":{"row":13,"column":0},"end":{"row":13,"column":2},"action":"insert","lines":["  "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":2},"action":"insert","lines":["  "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":2},"action":"insert","lines":["  "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":2},"action":"insert","lines":["  "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"insert","lines":["  "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":2},"action":"insert","lines":["  "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"insert","lines":["  "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":2},"action":"insert","lines":["  "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":2},"action":"insert","lines":["  "],"id":126},{"start":{"row":13,"column":0},"end":{"row":13,"column":2},"action":"insert","lines":["  "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":2},"action":"insert","lines":["  "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":2},"action":"insert","lines":["  "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":2},"action":"insert","lines":["  "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"insert","lines":["  "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":2},"action":"insert","lines":["  "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"insert","lines":["  "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":2},"action":"insert","lines":["  "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":2},"action":"insert","lines":["  "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":2},"action":"insert","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "]}]]},"ace":{"folds":[{"start":{"row":28,"column":31},"end":{"row":449,"column":0},"placeholder":"..."}],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":26,"column":36},"end":{"row":26,"column":36},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1432871315000,"hash":"5ae2585a66728ccce3adff91541ffe53477c8b87"}